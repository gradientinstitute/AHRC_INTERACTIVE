"use strict";var gui=document.getElementById("gradient_widget"),ms_width=[131.5,131.5,123],fs_width=[96.5,105.5,114],rej_reason=[0,0,1],msw=ms_width[0],fsw=fs_width[0],rej=rej_reason[0],mst=msw,fst=fsw,rejt=rej,wid_anim=null,ws=document.getElementById("woman_selector"),ms=document.getElementById("man_selector"),fr=document.getElementById("bias_reject"),rej_err=document.getElementById("reject_err"),rej_bias=document.getElementById("reject_bias");function towards(r,t,n){return r<t?t<(r+=n)&&(r=t):(r-=n)<t&&(r=t),r}function wid_animation(){msw=towards(msw,mst,.5),fsw=towards(fsw,fst,.5),rej=towards(rej,rejt,.04);var r=fsw+.257;ws.setAttribute("width",fsw),ms.setAttribute("width",msw),fr.setAttribute("x",fsw+.257),fr.setAttribute("width",123.6-r);var t=Math.min(2*rej,1),r=Math.min(2*(1-rej),1);rej_bias.setAttribute("transform","translate("+100*t+", 0)"),rej_err.setAttribute("transform","translate("+100*r+", 0)"),msw==mst&&fsw==fst&&rej==rejt&&(clearInterval(wid_anim),wid_anim=null)}function coords(r){var t=gui.createSVGPoint();gui.getBoundingClientRect();return t.x=r.clientX-gui.clientLeft,t.y=r.clientY-gui.clientTop,t.matrixTransform(gui.getScreenCTM().inverse())}function on_drag(e,n){var s=0,a=0,i=!1;e.addEventListener("mousedown",function(r){var t=coords(r),n=e.getAttribute("x"),r=e.getAttribute("y");s=t.x-n,a=t.y-r,i=!0}),gui.addEventListener("mousemove",function(r){var t;0==r.buttons&&(i=!1),i&&(r=(t=coords(r)).x-s,t=t.y-a,n(r,t))})}wid_animation();var slider_knob=document.getElementById("slider_knob"),slider_bar=document.getElementById("slider_bar"),readout=document.getElementById("readout");function update_slider(r){var t=2014+2*r;readout.innerHTML=""+t;t=38+27*r;slider_knob.setAttribute("x",t),slider_bar.setAttribute("d","m"+t+" 11 h"+(120-t)),mst=ms_width[r],fst=fs_width[r],rejt=rej_reason[r],(mst!=msw|fst!=fsw|rej!=rejt)&null==wid_anim&&(wid_anim=setInterval(wid_animation,20))}function scrollin(r,t){var s=null,a=0,i=0,o=document.getElementById(r);function d(){(i+=a)<0&&(i=0,clearInterval(s),s=null),1<i&&(i=1,clearInterval(s),s=null),t(o,i)}window.addEventListener("scroll",function(r){var t=window.pageYOffset,n=window.innerHeight/3,e=o.getBoundingClientRect();t>e.top+.75*e.height-n&i<1&&(a=.05,null==s&&(s=setInterval(d,10))),t<e.top+.5*e.height-n&0<i&&(a=-.05,null==s&&(s=setInterval(d,10)))}),t(o,i)}on_drag(slider_knob,function(r,t){update_slider(Math.max(0,Math.min(2,Math.round((r-39)/27))))}),update_slider(0),scrollin("annotations",function(r,t){r.setAttribute("transform","translate("+95*(1-t)+" 0)")});var item2=document.getElementById("woman_selector");scrollin("man_selector",function(r,t){t=.257+150*(t-1);r.setAttribute("x",t),item2.setAttribute("x",t)});